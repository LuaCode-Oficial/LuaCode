<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Builder Pro - Online</title>
    <style>
        :root { --primary: #00ff88; --bg: #121212; --panel: #1e1e1e; --text: #e0e0e0; }
        body { font-family: 'Fira Code', monospace; background: var(--bg); color: var(--text); margin: 0; display: flex; height: 100vh; overflow: hidden; }
        
        .sidebar { width: 380px; background: var(--panel); padding: 20px; overflow-y: auto; border-right: 2px solid #333; display: flex; flex-direction: column; gap: 15px; }
        .preview-area { flex: 1; padding: 20px; display: flex; flex-direction: column; background: #000; }
        
        input, textarea { width: 100%; background: #000; border: 1px solid #444; color: var(--primary); padding: 12px; border-radius: 8px; box-sizing: border-box; }
        textarea { height: 120px; font-size: 12px; }
        
        .file-block { background: #2a2a2a; padding: 15px; border-radius: 10px; border-left: 4px solid var(--primary); margin-bottom: 15px; }
        
        button { cursor: pointer; padding: 12px; border-radius: 8px; border: none; font-weight: bold; text-transform: uppercase; transition: 0.3s; }
        .btn-add { background: #333; color: white; border: 1px dashed #666; }
        .btn-build { background: var(--primary); color: #000; font-size: 1.1em; margin-top: 10px; }
        
        #link-display { 
            background: #222; border: 1px solid var(--primary); color: var(--primary);
            padding: 15px; border-radius: 8px; margin-top: 20px; display: none;
            word-break: break-all; cursor: pointer; text-align: center;
        }

        iframe { width: 100%; height: 100%; border: none; background: white; border-radius: 10px; margin-top: 10px; }
        .loading { color: var(--primary); font-style: italic; display: none; }
    </style>
</head>
<body>

    <div class="sidebar">
        <h2>üöÄ Web Deployer</h2>
        
        <label>Nome do Projeto</label>
        <input type="text" id="siteName" placeholder="Meu App v1.0">

        <div id="files-container"></div>

        <button class="btn-add" onclick="addNewFile()">[+] Adicionar Script/Arquivo</button>
        
        <button class="btn-build" id="buildBtn" onclick="publishSite()">üåê PUBLICAR SITE REAL</button>
        <div id="loadingMsg" class="loading">Enviando para o servidor...</div>
        
        <div id="link-display" onclick="copyLink()"></div>
    </div>

    <div class="preview-area">
        <label>Preview em Tempo Real:</label>
        <iframe id="live-preview"></iframe>
    </div>

    <script>
        function addNewFile(name = '', content = '') {
            const container = document.getElementById('files-container');
            const div = document.createElement('div');
            div.className = 'file-block';
            div.innerHTML = `
                <input type="text" class="file-name" value="${name}" placeholder="nome.html">
                <textarea class="file-content" style="margin-top:10px" placeholder="Seu c√≥digo aqui...">${content}</textarea>
                <button onclick="this.parentElement.remove()" style="background:none; color:red; font-size:10px; padding:0; margin-top:5px">Remover arquivo</button>
            `;
            container.appendChild(div);
        }

        // Adiciona o primeiro arquivo automaticamente
        addNewFile('index.html', '<h1>Site Online!</h1>\n<p>Este link funciona em qualquer lugar.</p>');

        async function publishSite() {
            const btn = document.getElementById('buildBtn');
            const loading = document.getElementById('loadingMsg');
            const linkDisplay = document.getElementById('link-display');
            
            btn.disabled = true;
            loading.style.display = 'block';

            // 1. Coleta o c√≥digo
            let fullCode = "";
            document.querySelectorAll('.file-block').forEach(block => {
                const name = block.querySelector('.file-name').value;
                const content = block.querySelector('.file-content').value;
                if(name.includes('.html')) fullCode += content;
                else if(name.includes('.css')) fullCode += `<style>${content}</style>`;
                else if(name.includes('.js')) fullCode += `<script>${content}<\/script>`;
            });

            try {
                // 2. API de Banco de Dados de Texto (Hastebin/Pastebin)
                // Usamos um servi√ßo de "CORS Proxy" para permitir o envio direto do navegador
                const response = await fetch('https://hastebin.com/documents', {
                    method: 'POST',
                    body: fullCode
                });
                
                const data = await response.json();
                
                // 3. Gera o link final
                // O link do Hastebin funciona como um banco de dados de c√≥digo bruto
                const finalUrl = `https://hastebin.com/raw/${data.key}`;
                
                linkDisplay.style.display = 'block';
                linkDisplay.innerText = "COPIAR LINK: " + finalUrl;
                document.getElementById('live-preview').srcdoc = fullCode;
                
            } catch (error) {
                alert("Erro ao conectar com o banco de dados. Tente novamente.");
                console.error(error);
            } finally {
                btn.disabled = false;
                loading.style.display = 'none';
            }
        }

        function copyLink() {
            const text = document.getElementById('link-display').innerText.replace("COPIAR LINK: ", "");
            navigator.clipboard.writeText(text);
            alert("Link Global copiado! Voc√™ pode abrir em qualquer dispositivo.");
        }
    </script>
</body>
</html>
